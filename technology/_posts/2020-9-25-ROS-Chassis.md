---
layout: post
title: ROS底盘三轮全向轮设计
description: >
    ROS底盘三轮全向轮设计
author: author1
---

# ROS底盘三轮全向轮设计

# 底盘部分&电路布线
## 一，运动控制系统结构
运动控制使用stm32F405作为主控，操作系统为Freertos，主要作为接受HERO运动控制指令和返回编码盘里程计，世界坐标系解算至电机速度，并且电机PID速度闭环控制。其中闭环控制频率为1KHZ，接受控制频率为20HZ，其上接受陀螺仪模块可以供主控进行里程计的卡尔曼滤波校准。
![](/assets/img/ed/ros/rosc/1.png)


1. 接受HERO运动控制指令和返回编码盘里程计：
为世界坐标系中的三轴线速度速度和三轴角速度，其中只需要取其中的x轴线速度和z轴角速度即可，其余控制速度底盘进行保留用于HERO导航系统校准航路，进行闭环控制使得路线更加精确所预留。硬件使用CH340模块进行USART转USB进行stm32F405和HERO双向通讯。
编码盘里程通过底盘转换系统将三个轮子的速度转化成世界坐标系中底盘的速度上传至HERO。
2. 世界坐标系解算至电机速度：
下图展示了底盘运动和电机运动关系示意图
![](/assets/img/ed/ros/rosc/2.png)
将其装换成世界坐标系转电机速度转换矩阵
![](/assets/img/ed/ros/rosc/3.png)
求矩阵的逆得电机速度转世界坐标系转换矩阵
![](/assets/img/ed/ros/rosc/4.png)
其中底盘轮子距离轴距0.3m，轮半径为0.08m带入可得转换单位关系。

3. 电机PID速度闭环控制：
电调通过电机上编码盘测量可知速度，速度进行反馈控制电流输出量形成对速度的闭环，达到底层上对速度的精确控制，参数经过多次调节，尽量削减导航给予速度和底盘负载实际速度之间的误差。

## 二，电路硬件布线
![](/assets/img/ed/ros/rosc/5.png)
